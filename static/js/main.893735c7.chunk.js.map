{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/App/App.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/services/images-api.js","components/Loader/Loader.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryModal.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","inputValue","addInputSearch","e","setState","currentTarget","value","trim","onSubmitInput","preventDefault","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","url","name","onClickImg","onClick","src","alt","ImageGalleryItemImage","ImagesAPIService","searchQuery","page","perPage","fetch","then","response","ok","json","Promise","reject","Error","images","incrementPage","newQuery","Spinner","color","height","width","timeout","Button","onClickBtn","imagesAPIService","Status","ImageGallery","error","status","loadMoreImages","loadImages","addLargeImg","largeImage","find","img","webformatURL","target","getModalImage","prevProps","prevName","searchValue","nextName","query","resetPage","fetchImages","hits","length","catch","finally","window","scrollTo","top","document","documentElement","scrollHeight","behavior","message","map","item","index","user","id","modal","querySelector","Modal","onEscClick","code","onClose","clearModal","onBackdropClick","addEventListener","removeEventListener","createPortal","Overlay","children","ModalImage","App","largeImg","showModal","getSearchValue","clearModalData","toggleModal","largeImageURL","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.893735c7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__lyqiD\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3f_e9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3TeoQ\",\"Modal\":\"Modal_Modal__i-z5s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__29wgb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Spinner\":\"Loader_Spinner__2MrCw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__Yx2db\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__35heC\"};","import { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    inputValue: '',\r\n  };\r\n\r\n  addInputSearch = e => {\r\n    this.setState({ inputValue: e.currentTarget.value.trim() });\r\n  };\r\n\r\n  onSubmitInput = e => {\r\n    e.preventDefault();\r\n    this.props.onSubmit(this.state.inputValue);\r\n    this.setState({ inputValue: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.onSubmitInput}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.inputValue}\r\n            onChange={this.addInputSearch}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nexport default function ImageGalleryItem({url, name, onClickImg}){\r\n    return (\r\n\r\n        <li className={s.ImageGalleryItem} onClick={onClickImg}>\r\n            <img src={url} alt={name} className={s.ImageGalleryItemImage} />\r\n</li>\r\n    )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    url: PropTypes.string.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n}\r\n","const BASE_URL = 'https://pixabay.com/api/';\r\nconst KEY = '22169948-cc9572b9e3579c1f2dd268170';\r\nexport default class ImagesAPIService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n    this.perPage = 12;\r\n  }\r\n\r\n  fetchImages() {\r\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}&key=${KEY}`;\r\n\r\n    return fetch(url)\r\n      .then(response => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n        return Promise.reject(\r\n          new Error(`Нет изображений по данному запросу ${this.searchQuery}`),\r\n        );\r\n      })\r\n      .then(images => {\r\n        this.incrementPage();\r\n        return images;\r\n      });\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport s from './Loader.module.css';\r\n\r\nexport default function Spinner() {\r\n  return (\r\n    <div className={s.Spinner}>\r\n      <Loader\r\n        type=\"Circles\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import s from './Button.module.css';\r\n\r\nexport default function Button({onClickBtn}) {\r\n    return (\r\n        <button type=\"button\" className={s.Button} onClick={onClickBtn}>Load more</button>\r\n    )\r\n}","import { Component } from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport ImagesAPIService from '../services/images-api';\r\n\r\nimport Loader from '../Loader/Loader';\r\nimport Button from '../Button/Button';\r\n\r\nconst imagesAPIService = new ImagesAPIService();\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    images: [],\r\n    error: null,\r\n    status: Status.IDLE,\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const prevName = prevProps.searchValue;\r\n    const nextName = this.props.searchValue;\r\n\r\n    if (prevName !== nextName) {\r\n      this.setState({ images: [] });\r\n      imagesAPIService.query = nextName;\r\n      imagesAPIService.resetPage();\r\n      this.loadImages();\r\n    }\r\n  }\r\n\r\n  loadImages() {\r\n    this.setState({ status: Status.PENDING });\r\n\r\n    imagesAPIService\r\n      .fetchImages()\r\n      .then(images => {\r\n        images.hits.length !== 0\r\n          ? this.setState({\r\n              images: [...this.state.images, ...images.hits],\r\n              status: Status.RESOLVED,\r\n            })\r\n          : this.setState({ status: Status.RESOLVED });\r\n      })\r\n      .catch(error => this.setState({ error, status: Status.REJECTED }))\r\n      .finally(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n  }\r\n\r\n  loadMoreImages = () => {\r\n    imagesAPIService.incrementPage();\r\n    this.loadImages();\r\n  };\r\n\r\n  addLargeImg = e => {\r\n    const largeImage = this.state.images.find(\r\n      img => img.webformatURL === e.target.src,\r\n    );\r\n\r\n    this.props.onClickImg();\r\n    this.props.getModalImage(largeImage);\r\n  };\r\n\r\n  render() {\r\n    const { status } = this.state;\r\n    if (status === 'idle') {\r\n      return null;\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <div>{this.error.message}</div>;\r\n    }\r\n\r\n    if (status === 'resolved' && this.state.images.length === 0) {\r\n      return <div>Images not found</div>;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <ul className={s.ImageGallery}>\r\n          {this.state.images.map((item, index) => (\r\n            <ImageGalleryItem\r\n              key={item.id}\r\n              url={item.webformatURL}\r\n              name={item.user}\r\n              onClickImg={this.addLargeImg}\r\n            />\r\n          ))}\r\n        </ul>\r\n\r\n        {this.state.status === Status.PENDING && <Loader />}\r\n        {this.state.images.length !== 0 && (\r\n          <Button onClickBtn={this.loadMoreImages} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\n\r\nconst modal = document.querySelector('#modal-root');\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.onEscClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.onEscClick);\r\n  }\r\n\r\n  onEscClick = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n      this.props.clearModal();\r\n    }\r\n  };\r\n\r\n  onBackdropClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n      this.props.clearModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.onBackdropClick}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modal,\r\n    );\r\n  }\r\n}\r\n","import PropTypes from 'prop-types';\r\n\r\n\r\nexport default function ModalImage({ url, name }) {\r\n    return (\r\n        <img src={url} alt={name} />\r\n    )\r\n}\r\n\r\nModalImage.propTypes = {\r\n    url: PropTypes.string.isRequired,\r\n    name:PropTypes.string.isRequired,\r\n}\r\n","import { Component } from 'react';\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport Modal from '../Modal/Modal';\r\nimport ModalImage from '../ImageGalleryItem/ImageGalleryModal';\r\nimport s from './App.module.css';\r\nclass App extends Component {\r\n  state = {\r\n    searchValue: '',\r\n    largeImg: {},\r\n    showModal: false,\r\n  };\r\n\r\n  getSearchValue = searchValue => {\r\n    this.setState({ searchValue });\r\n  };\r\n\r\n  getModalImage = largeImg => {\r\n    this.setState({ largeImg });\r\n  };\r\n\r\n  clearModalData = () => {\r\n    this.setState({ largeImg: {} });\r\n  };\r\n\r\n  toggleModal = e => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { largeImg, searchValue, showModal } = this.state;\r\n    return (\r\n      <div className={s.App}>\r\n        <Searchbar onSubmit={this.getSearchValue} />\r\n        <ImageGallery\r\n          searchValue={searchValue}\r\n          onClickImg={this.toggleModal}\r\n          getModalImage={this.getModalImage}\r\n        />\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal} clearModal={this.clearModalData}>\r\n            <ModalImage\r\n              url={largeImg.largeImageURL}\r\n              name={largeImg.user}\r\n            />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__38HUm\",\"SearchForm\":\"Searchbar_SearchForm__24i4y\",\"SearchFormButton\":\"Searchbar_SearchFormButton__kQu4A\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2af__\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1VUZl\",\"SearchForm-input\":\"Searchbar_SearchForm-input__3IlyQ\"};"],"sourceRoot":""}